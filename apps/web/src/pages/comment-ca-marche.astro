---
import BaseLayout from '../layouts/BaseLayout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import Breadcrumb from '../components/Breadcrumb.astro';
import HowItWorksTabs from '../components/HowItWorksTabs';
import { t } from '../i18n/utils';

const locale = 'fr' as const;

const consumerSteps = [
  { img: '/images/illustrations/vitrine-etape-1-cherche.png', title: t(locale, 'howItWorks.consumerStep1Title'), desc: t(locale, 'howItWorks.consumerStep1Desc') },
  { img: '/images/illustrations/vitrine-etape-2-reserve.png', title: t(locale, 'howItWorks.consumerStep2Title'), desc: t(locale, 'howItWorks.consumerStep2Desc') },
  { img: '/images/illustrations/vitrine-etape-3-retire.png', title: t(locale, 'howItWorks.consumerStep3Title'), desc: t(locale, 'howItWorks.consumerStep3Desc') },
  { img: null, title: t(locale, 'howItWorks.consumerStep4Title'), desc: t(locale, 'howItWorks.consumerStep4Desc'), iconName: 'UtensilsCrossed' },
];

const partnerSteps = [
  { iconName: 'Store', title: t(locale, 'howItWorks.partnerStep1Title'), desc: t(locale, 'howItWorks.partnerStep1Desc') },
  { iconName: 'ClipboardList', title: t(locale, 'howItWorks.partnerStep2Title'), desc: t(locale, 'howItWorks.partnerStep2Desc') },
  { iconName: 'Smartphone', title: t(locale, 'howItWorks.partnerStep3Title'), desc: t(locale, 'howItWorks.partnerStep3Desc') },
  { iconName: 'Banknote', title: t(locale, 'howItWorks.partnerStep4Title'), desc: t(locale, 'howItWorks.partnerStep4Desc') },
];
---

<BaseLayout
  title="Comment ça marche — BienBon"
  description="Découvrez comment BienBon fonctionne pour les consommateurs et les commerçants partenaires à l'île Maurice."
  locale={locale}
  canonicalPath="/comment-ca-marche"
>
  <Header locale={locale} currentPath="/comment-ca-marche" />
  <Breadcrumb locale={locale} items={[{ label: t(locale, 'breadcrumb.howItWorks') }]} />
  <main id="main-content">
    <!-- Page header -->
    <section class="bg-gradient-to-br from-green-100 to-neutral-50 py-14 sm:py-20">
      <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <h1 class="text-4xl sm:text-5xl font-extrabold text-neutral-900">
          {t(locale, 'howItWorks.title')}
        </h1>
        <p class="mt-4 text-lg text-neutral-600 max-w-xl mx-auto">
          {t(locale, 'howItWorks.subtitle')}
        </p>
      </div>
    </section>

    <!-- Tabs section -->
    <section class="py-16 sm:py-20 bg-white" aria-labelledby="how-tabs-heading">
      <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
        <h2 id="how-tabs-heading" class="sr-only">{t(locale, 'howItWorks.title')}</h2>
        <HowItWorksTabs
          client:visible
          consumerTab={t(locale, 'howItWorks.consumerTab')}
          partnerTab={t(locale, 'howItWorks.partnerTab')}
          consumerSteps={consumerSteps}
          partnerSteps={partnerSteps}
          consumerCta={t(locale, 'howItWorks.consumerCta')}
          consumerCtaHref="#app-download"
          partnerCta={t(locale, 'howItWorks.partnerCta')}
          partnerCtaHref="/devenir-partenaire"
          stepLabel="Étape"
        />
      </div>
    </section>

    <!-- FAQ teaser (gap 13) -->
    <section class="py-12 bg-neutral-50">
      <div class="max-w-xl mx-auto px-4 text-center">
        <p class="text-neutral-600 mb-4">{t(locale, 'howItWorks.faqTeaser')}</p>
        <a
          href="/faq"
          class="inline-flex items-center justify-center gap-2 px-6 py-3 rounded-lg border-2 border-green-700 text-green-700 font-bold text-sm hover:bg-green-700 hover:text-white transition-colors min-h-[48px]"
        >
          {t(locale, 'howItWorks.faqLink')}
          <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>
        </a>
      </div>
    </section>
  </main>
  <Footer locale={locale} />
</BaseLayout>
