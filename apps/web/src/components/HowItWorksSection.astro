---
import type { Locale } from '../i18n/utils';
import { t } from '../i18n/utils';
import Icon from './Icon.astro';

interface Props {
  locale: Locale;
}

const { locale } = Astro.props;

const steps = [
  {
    img: '/images/illustrations/vitrine-etape-1-cherche.png',
    imgAlt: '',
    titleKey: 'home.step1Title',
    descKey: 'home.step1Desc',
    number: '01',
    color: 'bg-green-100',
  },
  {
    img: '/images/illustrations/vitrine-etape-2-reserve.png',
    imgAlt: '',
    titleKey: 'home.step2Title',
    descKey: 'home.step2Desc',
    number: '02',
    color: 'bg-orange-100',
  },
  {
    img: '/images/illustrations/vitrine-etape-3-retire.png',
    imgAlt: '',
    titleKey: 'home.step3Title',
    descKey: 'home.step3Desc',
    number: '03',
    color: 'bg-green-100',
  },
  {
    img: null,
    imgAlt: '',
    titleKey: 'home.step4Title',
    descKey: 'home.step4Desc',
    number: '04',
    color: 'bg-orange-100',
  },
];
---

<section class="py-16 sm:py-24 bg-white" aria-labelledby="how-it-works-heading">
  <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-12">
      <h2 id="how-it-works-heading" class="text-3xl sm:text-4xl font-extrabold text-neutral-900">
        {t(locale, 'home.howItWorksTitle')}
      </h2>
    </div>

    <ol class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8" role="list">
      {steps.map((step) => (
        <li class="relative flex flex-col items-center text-center">
          <!-- Step number -->
          <div class="text-xs font-black text-neutral-300 mb-2 tracking-widest" aria-hidden="true">
            {step.number}
          </div>

          <!-- Step illustration -->
          <div
            class={`w-16 h-16 rounded-xl flex items-center justify-center mb-4 overflow-hidden ${step.color}`}
            aria-hidden="true"
          >
            {step.img ? (
              <img src={step.img} alt={step.imgAlt} class="w-full h-full object-contain p-1" />
            ) : (
              <Icon name="UtensilsCrossed" size={32} class="text-orange-600" />
            )}
          </div>

          <!-- Content -->
          <h3 class="text-lg font-extrabold text-neutral-900 mb-2">
            {t(locale, step.titleKey)}
          </h3>
          <p class="text-sm text-neutral-600 leading-relaxed">
            {t(locale, step.descKey)}
          </p>
        </li>
      ))}
    </ol>
  </div>
</section>
